# Deploy

## Deploy とは

**アプリやサービスを、ユーザーがアクセスできる本番環境に配置・公開すること**

- 開発者のローカル環境 → 本番環境への「移動・配置・起動」
- Web サービス、API、バッチなど対象は多様
- チーム開発では、「安全・再現可能・自動化された」デプロイが重要

## 代表的なデプロイ方法まとめ

### 1. 静的サイトのデプロイ（HTML/CSS/JS）

| **方法**         | **特徴**                   | **代表サービス**  |
| ---------------- | -------------------------- | ----------------- |
| GitHub Pages     | リポジトリに Push で即公開 | GitHub            |
| Netlify/Vercel   | 自動ビルド＋デプロイ       | Jamstack 系に強い |
| Firebase Hosting | SPA/PWA 向け               | Google 連携 ◎     |

---

### 2. 動的アプリ（Node.js、Rails、Django など）

| **方法**             | **特徴**                        | **代表サービス**           |
| -------------------- | ------------------------------- | -------------------------- |
| Heroku/Railway       | PaaS（インフラ不要）            | 学習用・中規模開発         |
| VPS（さくら/ConoHa） | SSH アップロード＋ PM2 等で起動 | 自由度高いが手動管理多め   |
| Docker + VPS         | コンテナ単位で管理              | 本番再現性 ◎、構成が複雑に |

---

### 3. クラウドコンテナ/サーバーレス

| **方法**              | **特徴**                | **代表サービス**     |
| --------------------- | ----------------------- | -------------------- |
| AWS Elastic Beanstalk | PaaS 寄りだが柔軟       | AWS フル活用に向く   |
| Google Cloud Run      | コンテナ 1 個から実行   | 手軽かつスケーラブル |
| AWS Lambda            | サーバー不要で API 提供 | 小規模〜イベント駆動 |

## **CI/CD との関係**

- `CI（継続的インテグレーション）`と`CD（継続的デリバリー/デプロイ）`は、現代のデプロイには不可欠。

### 一般的な CI/CD 構成（例：GitHub Actions）

```yaml
name: Deploy to Vercel

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm install
      - run: npm run build
      - run: vercel --prod --token=${{ secrets.VERCEL_TOKEN }}
```

- GitHub に Push するだけで、自動的にビルド＆本番反映
- Firebase, Cloud Run, ECS なども同様に設定可能

## デプロイのトラブルと対策

| **よくある問題**       | **原因**                                 | **解決策**                       |
| ---------------------- | ---------------------------------------- | -------------------------------- |
| 動かない・落ちる       | `.env`漏れ / パーミッション / ポート設定 | 環境変数とログをチェック         |
| 前のコードが表示される | キャッシュ / CDN                         | キャッシュクリア、バージョン付与 |
| 差分だけ更新できない   | 手動アップロード                         | Git ベースの CI/CD に移行する    |

**引用元**

[デプロイ完全ガイド｜基本から応用・最近のトレンドまで - Qiita](https://qiita.com/yamapiiii/items/ac6e467041929acbb5f1)
